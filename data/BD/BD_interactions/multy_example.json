{
  "title": "Поведенческое ядро бэка камикадзе",
  "object_list": [
    {"name": "TARGET", "description": "Идентификатор объекта моделирования "},
    {"name": "DESTINATION", "description": "Идентификатор геообъекта, который следует за целью"},
    {"name": "WEATHER", "description": "Идентификатор геообъекта, который следует за целью"}
  ],
  "interaction_list": [
    {
      "title": "Движение объекта по маршруту",
      "source_object_id": "!TARGET!",
      "interaction_type": "moving",
      "trigger_condition": "!TARGET!.properties['geo_path']['geometry']['coordinates'].length > 0 and !TARGET!.properties['state'] in ['moving', 'attacking']",
      "response_action": "!TARGET!.actions.move(item=!TARGET!,  path=!TARGET!.properties['geo_path'],  time_in_seconds=self.second_in_iteration)"
    },
    {
      "title": "Поиск объекта по видимости",
      "source_object_id": "!TARGET!",
      "interaction_type": "look_detection",
      "trigger_condition": "!TARGET!.actions.look_detection(item1=!TARGET!, item2=!DESTINATION!,  rain=!WEATHER!.properties['rain_intensive'], frog=!WEATHER!.properties['frog_intensive'], max_distance=!TARGET!.properties['detection_distance'])",
      "response_set_values": "!TARGET!.properties['segment_index'] = -1; !TARGET!.properties['target'] = '!DESTINATION!'; !TARGET!.properties['state'] = 'attacking' ",
      "response_action": "Model_00.actions.fox_rabbit(lat1=!TARGET!.properties['lat'], lon1=!TARGET!.properties['lon'], alt1=!TARGET!.properties['alt'], speed1=!TARGET!.properties['speed'], lat2=!DESTINATION!.properties['lat'], lon2=!DESTINATION!.properties['lon'], alt2=!DESTINATION!.properties['alt'], speed2=!DESTINATION!.properties['speed'], course2=!DESTINATION!.properties['course'], dt=100.0) and !TARGET!.properties['geo_path']['geometry']['coordinates'] = !TARGET!.actions.find_path(ship_lat=!TARGET!.properties['lat'], ship_lon=!TARGET!.properties['lon'], target_lat=Model_00.properties['lat'], target_lon=Model_00.properties['lon'], geo_area=Model_00.actions.filter_by_type(objects=self.features, obj_type=\"RESTRICTED_AREA\"))"
    },
    {
      "title": "Проверка уничтожения объекта",
      "source_object_id": "!TARGET!",
      "interaction_type": "check_destroyed",
      "trigger_condition": "!TARGET!.properties['state'] == 'attacking'",
      "response_set_values": "",
      "response_action": "!TARGET!.actions.check_destroyed(attacker=!TARGET!, target=!TARGET!.properties['target'], min_distance=10, probability=0.65)"
    }
  ]
}
