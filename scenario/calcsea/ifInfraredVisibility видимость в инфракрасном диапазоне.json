{
  "scenario_id":"Видимость ИК-Диапазон",

  "objects":
  [
    {
      "id": "SHIP_00",
      "title": "Корабль",
      "properties":[
        {"name": "class_code", "value": "131472600009", "type": "str"},
        {"name": "is_own", "value": 1, "type": "int"},
        {"name": "lat", "value": 43.53174, "type": "float"},
        {"name": "lon", "value": 39.46268, "type": "float"},
        {"name": "alt", "value": 0, "type": "int"},
        {"name": "course", "value": 10.40, "type": "float"},
        {"name": "speed", "value": 9.6, "type": "float"},
        {"name": "hull_damage", "value": 0, "type": "int"},
        {"name": "image", "value": "ship-blue.png", "type": "str"},
        {"name": "state", "value": "standing", "type": "str"}
      ],
      "actions": [
        {
          "name": "Целераспределение",
          "type": "targeting",
          "algorithm_id": "alg_id_targeting",
          "output_mapping":[]
        }
      ]
    },
    {
      "id": "WEATHER",
      "title": "Гидрометеорологическая обстановка2",
      "properties": [
        {"name": "is_day", "value":  0, "type": "int", "title":"наличие или отсутствие естественного или искусственного освещения цели"},
        {"name": "is_frog", "value":  0, "type": "int", "title":"наличие или отсутствие тумана/дыма"},
        {"name": "air_temperature", "value":  24, "type": "float", "title":"температура окружающией среды "},
        {"name": "type_object", "value": "meteo", "type": "str"}
      ],
      "actions": []
    },
    {
      "id": "DETECT_00",
      "title": "Тепловизор",
      "properties":[
        {"name": "class_code", "value": "31261500011300000002", "type": "str"},
        {"name": "is_own", "value": 1, "type": "int"},
        {"name": "lat", "value": 43.53174, "type": "float"},
        {"name": "lon", "value": 39.46268, "type": "float"},
        {"name": "alt", "value": 0, "type": "int"},
        {"name": "look_lat", "value": 43.61540, "type": "float"},
        {"name": "look_lon", "value": 39.50985, "type": "float"},
        {"name": "look_alt", "value": 0, "type": "float"},
        {"name": "dAlfa", "value":  30, "type": "float", "title":"угол обзора по горизонтали"},
        {"name": "dBetta", "value":  30, "type": "float", "title":"угол обзора по вертикали"},
        {"name": "iType", "value":  2, "type": "int", "title":"Long Wave Infrared, длинноволновый спектральный диапазон 8-14 мкм"},
        {"name": "dDeltaTmin", "value":  0.05, "type": "float", "title":"температурное разрешение, т.е. чувствительность"},
        {"name": "df", "value":  360, "type": "float", "title":"фокусное расстояние в мм (по умолчанию 360)"},
        {"name": "dsp", "value":  4.8, "type": "float", "title":" размер пиксела матрицы в мкм (по умолчанию 4.8)"},
        {"name": "iNMx", "value":  640, "type": "float", "title":" разрешение матрицы, соответственно, по горизонтали в пикселах "},
        {"name": "iNMy", "value":  480, "type": "float", "title":" разрешение матрицы, соответственно, по вертикали в пикселах "},
        {"name": "detection_radius", "value":  10000, "type": "float", "title":"dLmax максимальная дальность обнаружения в идеальных условиях в км  "},
        {"name": "dL", "value":  0, "type": "float", "title":"дальность до цели в км (по умолчанию 8) вроде как удаляем параметр"},
        {"name": "dTc", "value":  23, "type": "float", "title":"средняя температура корпуса цели в оС (по умолчанию 23)"},

        {"name": "state", "value": "scanning", "type": "str"}
      ],
      "actions": [
        {
          "name": "обнаружение",
          "type": "detect",
          "algorithm_id": "alg_id_detect_thermal_imager",
          "output_mapping": []
        }
      ]
    },
    {
      "id": "BEK_01",
      "title": "БЭК 1",
      "properties":
      [
        {"name": "class_code", "value": "10213", "type": "str"},
        {"name": "is_own", "value": 0, "type": "int"},
        {"name": "lat", "value": 43.626470178732255, "type": "float"},
        {"name": "lon", "value": 39.48991308634684, "type": "float"},
        {"name": "alt", "value": 0.0, "type": "float"},
        {"name": "course", "value": 184.19, "type": "float"},
        {"name": "speed", "value": 20.0, "type": "float"},
        {"name": "distance_of_defeat", "value": 7408, "type": "int"},
        {"name": "detection_distance", "value": 20000, "type": "int"},
        {"name": "rocket_count", "value": 2, "type": "int"},
        {"name": "width", "value":  5.0, "type": "float", "title":"размеры цели по горизонтали "},
        {"name": "height", "value":  1.5, "type": "float", "title":"размеры цели по вертикали "},
        {"name": "case_temperature", "value":  25, "type": "float", "title":"температура корпуса"},
        {"name": "is_detected", "value":  0, "type": "float", "title":"обнаружен ли объект"},
        {"name": "state", "value": "moving", "type": "str"}
      ],
      "actions": [
        {
          "name": "движение",
          "type": "move",
          "algorithm_id": "alg_id_0",
          "output_mapping":  [ {"lat": "new_lat"}, {"lon":  "new_lon"} ]
        },
        {
          "name": "маневрирование",
          "type": "maneuver",
          "algorithm_id": "alg_id_3",
          "output_mapping": [ { "course": "new_course"} ]
        }
      ]
    },

    {
      "id": "BEK_02",
      "title": "БЭК 2",
      "properties":
      [
        {"name": "class_code", "value": "10213", "type": "str"},
        {"name": "is_own", "value": 0, "type": "int"},
        {"name": "lat", "value": 43.610292063473096, "type": "float"},
        {"name": "lon", "value": 39.53649212169146, "type": "float"},
        {"name": "alt", "value": 0.0, "type": "float"},
        {"name": "course", "value": 269.68, "type": "float"},
        {"name": "speed", "value": 20.0, "type": "float"},
        {"name": "distance_of_defeat", "value": 7408, "type": "int"},
        {"name": "detection_distance", "value": 20000, "type": "int"},
        {"name": "rocket_count", "value": 2, "type": "int"},
        {"name": "width", "value":  5.0, "type": "float", "title":"размеры цели по горизонтали "},
        {"name": "height", "value":  1.5, "type": "float", "title":"размеры цели по вертикали "},
        {"name": "case_temperature", "value":  10, "type": "float", "title":"температура корпуса"},
        {"name": "is_detected", "value":  0, "type": "float", "title":"обнаружен ли объект"},
        {"name": "state", "value": "moving", "type": "str"}
      ],
      "actions": [
        {
          "name": "движение",
          "type": "move",
          "algorithm_id": "alg_id_0",
          "output_mapping":  [ {"lat": "new_lat"}, {"lon":  "new_lon"} ]
        },
        {
          "name": "маневрирование",
          "type": "maneuver",
          "algorithm_id": "alg_id_3",
          "output_mapping": [ { "course": "new_course"} ]
        }
      ]
    },
    {
      "id": "PNT_01",
      "title": "Точка перехвата объекта",
      "properties": [
        {"name": "class_code", "value": "7132250034230000000", "type": "str"},
        {"name": "is_own", "value": 1, "type": "int"},
        {"name": "lat", "value": 43.60648, "type": "float"},
        {"name": "lon", "value": 39.49593, "type": "float"},
        {"name": "alt", "value": 0, "type": "int"},
        {"name": "course", "value": 66.8, "type": "float"},
        {"name": "speed", "value": 0.0, "type": "float"},
        {"name": "image", "value": "cross.png", "type": "str"},
        {"name": "state", "value": "standing", "type": "str"}
      ],
      "actions": []
    },
    {
      "id":"Model_00",
      "title":"Среда взаимодействия",
      "properties":
      [
        {"name": "current_iteration", "value": 0, "type": "int"},
        {"name": "elapsed_time_in_sec", "value": 0, "type": "int"},
        {"name": "time_per_sec", "value": 1, "type": "int"}

      ],
      "actions":[]
    }

  ],
  "classes": [],

  "interactions": [
    {
      "source_object_id": "DETECT_00",
      "interaction_type": "detect",
      "trigger_condition": "DETECT_00.properties['state'] =='scanning'",
      "response_set_values": "BEK_01.properties['is_detected'] = DETECT_00.actions.detect(weapon_latitude=DETECT_00.properties['lat'], weapon_longitude=DETECT_00.properties['lon'], weapon_altitude=DETECT_00.properties['alt'], vertical_sector=DETECT_00.properties['dBetta'], horizontal_sector=DETECT_00.properties['dAlfa'], observations_latitude=DETECT_00.properties['look_lat'], observations_longitude=DETECT_00.properties['look_lon'], observations_altitude=DETECT_00.properties['look_alt'], infrared_type=DETECT_00.properties['iType'], temperature_sensitivity=DETECT_00.properties['dDeltaTmin'], lens_focus=DETECT_00.properties['df'], pixel_size=DETECT_00.properties['dsp'], vertical_pixel=DETECT_00.properties['iNMx'], horizontal_pixel=DETECT_00.properties['iNMy'], detection_range=DETECT_00.properties['detection_radius'], target_illumination=WEATHER.properties['is_day'], presence_fog=WEATHER.properties['is_frog'], target_latitude=BEK_01.properties['lat'], target_longitude=BEK_01.properties['lon'], target_altitude=BEK_01.properties['alt'], temperature_background=WEATHER.properties['air_temperature'], target_temperature=BEK_01.properties['case_temperature'], target_vertical=BEK_01.properties['width'], target_horizontal=BEK_01.properties['height'])"

    },
    {
      "source_object_id": "DETECT_00",
      "interaction_type": "detect",
      "trigger_condition": "DETECT_00.properties['state'] =='scanning'",
      "response_set_values": "BEK_02.properties['is_detected'] = DETECT_00.actions.detect(weapon_latitude=DETECT_00.properties['lat'], weapon_longitude=DETECT_00.properties['lon'], weapon_altitude=DETECT_00.properties['alt'], vertical_sector=DETECT_00.properties['dBetta'], horizontal_sector=DETECT_00.properties['dAlfa'], observations_latitude=DETECT_00.properties['look_lat'], observations_longitude=DETECT_00.properties['look_lon'], observations_altitude=DETECT_00.properties['look_alt'], infrared_type=DETECT_00.properties['iType'], temperature_sensitivity=DETECT_00.properties['dDeltaTmin'], lens_focus=DETECT_00.properties['df'], pixel_size=DETECT_00.properties['dsp'], vertical_pixel=DETECT_00.properties['iNMx'], horizontal_pixel=DETECT_00.properties['iNMy'], detection_range=DETECT_00.properties['detection_radius'], target_illumination=WEATHER.properties['is_day'], presence_fog=WEATHER.properties['is_frog'], target_latitude=BEK_02.properties['lat'], target_longitude=BEK_02.properties['lon'], target_altitude=BEK_02.properties['alt'], temperature_background=WEATHER.properties['air_temperature'], target_temperature=BEK_02.properties['case_temperature'], target_vertical=BEK_02.properties['width'], target_horizontal=BEK_02.properties['height'])"

    },
    {
      "source_object_id": "BEK_01",
      "interaction_type": "moving",
      "trigger_condition": "BEK_01.properties['state'] =='moving'",
      "response_action": "BEK_01.actions.move(item=BEK_01, time_in_seconds=self.second_in_iteration)"
    },
    {
      "source_object_id": "BEK_02",
      "interaction_type": "moving",
      "trigger_condition": "BEK_02.properties['state'] =='moving'",
      "response_action": "BEK_02.actions.move(item=BEK_02, time_in_seconds=self.second_in_iteration)"
    }
  ],
  "algorithms" : [
    {
      "id":"alg_id_0",
      "title": "Алгоритм движения объекта",
      "description": "Простой встроенный алгоритм в модель движения объекта из точки 1 в точку 2 используя координаты курс и скорость",
      "type": "inner",
      "function": "ModelTasks.move_object",
      "input_parameters": [],
      "output_parameters": [
        {"new_lat": "float"},
        {"new_lon": "float"}
      ]
    },
    {
      "id":"alg_id_detect_thermal_imager",
      "title": "Алгоритм обнаружения объектов противника на заданном радиусе",
      "description": "Использует простой алгоритм расчета расстояния между объектами и сравнивает с дальностью обнаружения",
      "type": "libcpp",
      "function": "LIBCPP04.ifInfraredVisibility",
      "input_parameters": [
        {"weapon_latitude":"float", "title":"латитуда тепловизора"},
        {"weapon_longitude":"float", "title":"лонгитуда тепловизора"},
        {"weapon_altitude":"float","title":"алтитуда тепловизора"},
        {"vertical_sector":"float", "title":"параметры обзора"},
        {"horizontal_sector":"float", "title":"параметры обзора"},
        {"observations_latitude":"float", "title":"латитуда направления"},
        {"observations_longitude":"float", "title":"лонгитуда направления"},
        {"observations_altitude":"float","title":"алтитуда направления"},
        {"infrared_type":"int","title":"характеристики тепловизора 0, 1, 2"},
        {"temperature_sensitivity":"float","title":"температурное разрешение, т.е. чувствительность"},
        {"lens_focus":"float","title":"фокусное расстояние в мм"},
        {"pixel_size":"float","title":"размер пиксела матрицы в мкм"},
        {"vertical_pixel":"int","title":" разрешение матрицы ширина в пикселях"},
        {"horizontal_pixel":"int","title":"разрешение матрицы высота в пикселях"},
        {"detection_range":"float","title":"максимальная дальность обнаружения в км"},
        {"target_illumination":"int","title":"освещения 0 нет 1 есть"},
        {"presence_fog":"int","title":"туман 0 нет 1 есть"},
        {"target_latitude":"float","title":"латитуда цели"},
        {"target_longitude":"float","title":"лонгитуда цели"},
        {"target_altitude":"float","title":"алтитуда цели"},
        {"temperature_background":"float","title":"температура окружающей среды"},
        {"target_temperature":"float","title":"дальность до цели в км"},
        {"dTc":"float","title":"средняя температура корпуса цели в оС"},
        {"target_horizontal":"float","title":"ширина объекта"},
        {"target_vertical":"float","title":"высота объекта"}
      ],
      "output_parameters": [ {"state":  "int"}]
    }


  ],
  "files": [
    {
      "id": "LIBCPP04",
      "file_name": "libcalcsea.so.1.0.5",
      "type":"libcpp",
      "md5_hash": "698d51a19d8a121ce581499d7b701668"
    }
  ],
  "simulation_parameters": {
    "time_step": 1,
    "end_condition": "0 == -1",
    "max_iterations": 100000,
    "map_center": "43.54957, 39.49488",
    "map_zoom": 6
  }
}


