{
  "scenario_id":"GetVisibilityRadioObj1Obj2",

  "objects":
  [
    {
      "id": "SHIP_00",
      "title": "Корабль",
      "properties":[
        {"name": "class_code", "value": "131472600009", "type": "str"},
        {"name": "is_own", "value": 1, "type": "int"},
        {"name": "lat", "value": 43.53174, "type": "float"},
        {"name": "lon", "value": 39.46268, "type": "float"},
        {"name": "alt", "value": 0, "type": "int"},
        {"name": "course", "value": 10.40, "type": "float"},
        {"name": "speed", "value": 9.6, "type": "float"},
        {"name": "hull_damage", "value": 0, "type": "int"},
        {"name": "image", "value": "ship-blue.png", "type": "str"},
        {"name": "state", "value": "standing", "type": "str"}
      ],
      "actions": [
        {
          "name": "Целераспределение",
          "type": "targeting",
          "algorithm_id": "alg_id_targeting",
          "output_mapping":[]
        }
      ]
    },
    {
      "id": "WEATHER",
      "title": "Гидрометеорологическая обстановка2",
      "properties": [
        {"name": "is_day", "value":  0, "type": "int", "title":"наличие или отсутствие естественного или искусственного освещения цели"},
        {"name": "is_frog", "value":  0, "type": "int", "title":"наличие или отсутствие тумана/дыма"},
        {"name": "intensiv", "value":  0, "type": "int", "title":"интенсивность дождя/снега от 0 (осадков нет) до 100 (сплошные осадки)"},
        {"name": "air_temperature", "value":  24, "type": "float", "title":"температура окружающией среды "},
        {"name": "type_object", "value": "meteo", "type": "str"}
      ],
      "actions": []
    },
    {
      "id": "RLS_00",
      "title": "Радар",
      "properties":[
        {"name": "class_code", "value": "31261500011300000002", "type": "str"},
        {"name": "is_own", "value": 1, "type": "int"},
        {"name": "lat", "value": 43.53174, "type": "float"},
        {"name": "lon", "value": 39.46268, "type": "float"},
        {"name": "alt", "value": 0, "type": "int"},
        {"name": "look_lat", "value": 43.61540, "type": "float"},
        {"name": "look_lon", "value": 39.50985, "type": "float"},
        {"name": "look_alt", "value": 0, "type": "float"},
        {"name": "dAlfa", "value":  30, "type": "float", "title":"угол обзора по горизонтали"},
        {"name": "dBetta", "value":  30, "type": "float", "title":"угол обзора по вертикали"},
        {"name": "iType", "value":  2, "type": "int", "title":"Long Wave Infrared, длинноволновый спектральный диапазон 8-14 мкм"},
        {"name": "dDeltaTmin", "value":  0.05, "type": "float", "title":"температурное разрешение, т.е. чувствительность"},
        {"name": "df", "value":  360, "type": "float", "title":"фокусное расстояние в мм (по умолчанию 360)"},
        {"name": "dsp", "value":  4.8, "type": "float", "title":" размер пиксела матрицы в мкм (по умолчанию 4.8)"},
        {"name": "iNMx", "value":  640, "type": "float", "title":" разрешение матрицы, соответственно, по горизонтали в пикселах "},
        {"name": "iNMy", "value":  480, "type": "float", "title":" разрешение матрицы, соответственно, по вертикали в пикселах "},
        {"name": "detection_radius", "value":  10000, "type": "float", "title":"dLmax максимальная дальность обнаружения в идеальных условиях в км  "},
        {"name": "dL", "value":  0, "type": "float", "title":"дальность до цели в км (по умолчанию 8) вроде как удаляем параметр"},
        {"name": "lenght_wave_RLS", "value":   0.030, "type": "float", "title":"длина волны РЛС (м) (по умолчанию 0.030)"},
        {"name": "impuls_power_RLS", "value":   50000, "type": "float", "title":"импульсная мощность РЛС (Вт) (по умолчанию 50000)"},
        {"name": "sensitivity_RLS", "value":   	0.00000000001, "type": "float", "title":"чувствительность  РЛС (Вт) (по умолчанию 1e-11)"},
        {"name": "direct_antenna_RLS", "value":   	11000, "type": "float", "title":"коэффициент направленности антены РЛС (по умолчанию 11000)"},
        {"name": "dTc", "value":  23, "type": "float", "title":"средняя температура корпуса цели в оС (по умолчанию 23)"},

        {"name": "state", "value": "scanning", "type": "str"}
      ],
      "actions": [
        {
          "name": "обнаружение",
          "type": "detect",
          "algorithm_id": "alg_id_detect_radio",
          "output_mapping": []
        }
      ]
    },
    {
      "id": "BEK_01",
      "title": "БЭК 1",
      "properties":
      [
        {"name": "class_code", "value": "10213", "type": "str"},
        {"name": "is_own", "value": 0, "type": "int"},
        {"name": "lat", "value": 43.626470178732255, "type": "float"},
        {"name": "lon", "value": 39.48991308634684, "type": "float"},
        {"name": "alt", "value": 0.0, "type": "float"},
        {"name": "course", "value": 184.19, "type": "float"},
        {"name": "speed", "value": 20.0, "type": "float"},
        {"name": "distance_of_defeat", "value": 7408, "type": "int"},
        {"name": "detection_distance", "value": 20000, "type": "int"},
        {"name": "rocket_count", "value": 2, "type": "int"},
        {"name": "width", "value":  5.0, "type": "float", "title":"размеры цели по горизонтали "},
        {"name": "height", "value":  1.5, "type": "float", "title":"размеры цели по вертикали "},
        {"name": "case_temperature", "value":  25, "type": "float", "title":"температура корпуса"},
        {"name": "is_detected", "value":  0, "type": "float", "title":"обнаружен ли объект"},
        {"name": "area_effectivnosty", "value":  1000, "type": "float", "title":"Эффективная поверхность рассеяния цели (м2)"},
        {"name": "state", "value": "moving", "type": "str"}
      ],
      "actions": [
        {
          "name": "движение",
          "type": "move",
          "algorithm_id": "alg_id_0",
          "output_mapping":  [ {"lat": "new_lat"}, {"lon":  "new_lon"} ]
        },
        {
          "name": "маневрирование",
          "type": "maneuver",
          "algorithm_id": "alg_id_3",
          "output_mapping": [ { "course": "new_course"} ]
        }
      ]
    },

    {
      "id": "BEK_02",
      "title": "БЭК 2",
      "properties":
      [
        {"name": "class_code", "value": "10213", "type": "str"},
        {"name": "is_own", "value": 0, "type": "int"},
        {"name": "lat", "value": 43.610292063473096, "type": "float"},
        {"name": "lon", "value": 39.53649212169146, "type": "float"},
        {"name": "alt", "value": 0.0, "type": "float"},
        {"name": "course", "value": 269.68, "type": "float"},
        {"name": "speed", "value": 20.0, "type": "float"},
        {"name": "distance_of_defeat", "value": 7408, "type": "int"},
        {"name": "detection_distance", "value": 20000, "type": "int"},
        {"name": "rocket_count", "value": 2, "type": "int"},
        {"name": "width", "value":  5.0, "type": "float", "title":"размеры цели по горизонтали "},
        {"name": "height", "value":  1.5, "type": "float", "title":"размеры цели по вертикали "},
        {"name": "case_temperature", "value":  10, "type": "float", "title":"температура корпуса"},
        {"name": "is_detected", "value":  0, "type": "float", "title":"обнаружен ли объект"},
        {"name": "area_effectivnosty", "value":  1000, "type": "float", "title":"Эффективная поверхность рассеяния цели (м2)"},
        {"name": "state", "value": "moving", "type": "str"}
      ],
      "actions": [
        {
          "name": "движение",
          "type": "move",
          "algorithm_id": "alg_id_0",
          "output_mapping":  [ {"lat": "new_lat"}, {"lon":  "new_lon"} ]
        },
        {
          "name": "маневрирование",
          "type": "maneuver",
          "algorithm_id": "alg_id_3",
          "output_mapping": [ { "course": "new_course"} ]
        }
      ]
    },
    {
      "id": "PNT_01",
      "title": "Точка перехвата объекта",
      "properties": [
        {"name": "class_code", "value": "7132250034230000000", "type": "str"},
        {"name": "is_own", "value": 1, "type": "int"},
        {"name": "lat", "value": 43.60648, "type": "float"},
        {"name": "lon", "value": 39.49593, "type": "float"},
        {"name": "alt", "value": 0, "type": "int"},
        {"name": "course", "value": 66.8, "type": "float"},
        {"name": "speed", "value": 0.0, "type": "float"},
        {"name": "image", "value": "cross.png", "type": "str"},
        {"name": "state", "value": "standing", "type": "str"}
      ],
      "actions": []
    },
    {
      "id":"Model_00",
      "title":"Среда взаимодействия",
      "properties":
      [
        {"name": "current_iteration", "value": 0, "type": "int"},
        {"name": "elapsed_time_in_sec", "value": 0, "type": "int"},
        {"name": "time_per_sec", "value": 1, "type": "int"}

      ],
      "actions":[]
    }

  ],
  "classes": [],

  "interactions": [
    {
      "source_object_id": "RLS_00",
      "interaction_type": "detect",
      "trigger_condition": "RLS_00.properties['state'] =='scanning'",
      "response_set_values": "BEK_01.properties['is_detected'] = RLS_00.actions.detect(weapon_latitude=RLS_00.properties['lat'], weapon_longitude=RLS_00.properties['lon'], weapon_altitude=RLS_00.properties['alt'], target_latitude=BEK_01.properties['lat'],  target_longitude=BEK_01.properties['lon'], target_altitude=BEK_01.properties['alt'],  target_curse=BEK_01.properties['course'],  area_effectivnosty=BEK_01.properties['area_effectivnosty'], intensiv=WEATHER.properties['intensiv'], lenght_wave_RLS=RLS_00.properties['lenght_wave_RLS'], impuls_power_RLS=RLS_00.properties['impuls_power_RLS'], sensitivity_RLS=RLS_00.properties['sensitivity_RLS'], direct_antenna_RLS=RLS_00.properties['direct_antenna_RLS'])"

    },
    {
      "source_object_id": "RLS_00",
      "interaction_type": "detect",
      "trigger_condition": "RLS_00.properties['state'] =='scanning'",
      "response_set_values": "BEK_02.properties['is_detected'] = RLS_00.actions.detect(weapon_latitude=RLS_00.properties['lat'], weapon_longitude=RLS_00.properties['lon'], weapon_altitude=RLS_00.properties['alt'], target_latitude=BEK_02.properties['lat'],  target_longitude=BEK_02.properties['lon'], target_altitude=BEK_02.properties['alt'],  target_curse=BEK_02.properties['course'],  area_effectivnosty=BEK_02.properties['area_effectivnosty'], intensiv=WEATHER.properties['intensiv'], lenght_wave_RLS=RLS_00.properties['lenght_wave_RLS'], impuls_power_RLS=RLS_00.properties['impuls_power_RLS'], sensitivity_RLS=RLS_00.properties['sensitivity_RLS'], direct_antenna_RLS=RLS_00.properties['direct_antenna_RLS'])"
    },
    {
      "source_object_id": "BEK_01",
      "interaction_type": "moving",
      "trigger_condition": "BEK_01.properties['state'] =='moving'",
      "response_action": "BEK_01.actions.move(item=BEK_01, time_in_seconds=self.second_in_iteration)"
    },
    {
      "source_object_id": "BEK_02",
      "interaction_type": "moving",
      "trigger_condition": "BEK_02.properties['state'] =='moving'",
      "response_action": "BEK_02.actions.move(item=BEK_02, time_in_seconds=self.second_in_iteration)"
    }
  ],
  "algorithms" : [
    {
      "id":"alg_id_0",
      "title": "Алгоритм движения объекта",
      "description": "Простой встроенный алгоритм в модель движения объекта из точки 1 в точку 2 используя координаты курс и скорость",
      "type": "inner",
      "function": "ModelTasks.move_object",
      "input_parameters": [],
      "output_parameters": [
        {"new_lat": "float"},
        {"new_lon": "float"}
      ]
    },
    {
      "id":"alg_id_detect_radio",
      "title": "Алгоритм обнаружения радиолакоционная видимости",
      "description": "Функция Расчет радиолакоционная видимости одного объекта другим (модель 1)",
      "type": "libcpp",
      "function": "LIBCPP04.GetVisibilityRadioObj1Obj2",
      "input_parameters": [
        {"weapon_latitude": "double", "title": "широта оружия"},
        {"weapon_longitude": "double", "title": "долгота оружия"},
        {"weapon_altitude": "double", "title": "высота оружия"},
        {"target_latitude": "double", "title": "широта цели"},
        {"target_longitude": "double", "title": "долгота цели"},
        {"target_altitude": "double", "title": "высота цели"},
        {"target_curse": "double", "title": "курс цели"},
        {"area_effectivnosty": "double", "title": "эффективная площадь отражения цели"},
        {"intensiv": "int", "title": "интенсивность излучения цели"},
        {"lenght_wave_RLS": "double", "title": "длина волны РЛС (м)"},
        {"impuls_power_RLS": "double", "title": "импульсная мощность РЛС (Вт)"},
        {"sensitivity_RLS": "double", "title": "чувствительность РЛС"},
        {"direct_antenna_RLS": "double", "title": "направленность антенны РЛС"}
      ],
      "output_parameters": [ {"state":  "int"}]
    }


  ],
  "files": [
     {
      "id": "LIBCPP04",
      "file_name": "libcalcsea.so.1.0.5",
      "type":"libcpp",
      "md5_hash": "698d51a19d8a121ce581499d7b701668"
    }
  ],
  "simulation_parameters": {
    "time_step": 1,
    "end_condition": "0 == -1",
    "max_iterations": 100000,
    "map_center": "43.53312, 39.46423",
    "map_zoom": 6
  }
}


