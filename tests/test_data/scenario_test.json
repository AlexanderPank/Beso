{
  "scenario_id":"scen_fox_rabbit",

  "objects":
	[
      {
        "id": "RABBIT_00",
        "title": "Корабль",
        "properties":[
          {"name": "class_code", "value":"131472600009", "type": "str"},
          {"name": "is_own", "value":0, "type": "bool"},
          {"name": "lat", "value":43.41686, "type": "double"},
          {"name": "lon", "value":39.47805, "type": "double"},
          {"name": "alt", "value":0, "type": "double"},
          {"name": "course", "value":10, "type": "double"},
          {"name": "speed", "value":9.6, "type": "double"},
          {"name": "state", "value":"moving", "type": "str"},
          {"name": "segment_index", "value":0, "type": "int"},
          {"name": "geo_path",  "type": "feature", "value":
          {"type": "Feature","properties": {"id": "RABBIT_00_path", "class_code": "131405000210000000"},
            "geometry": {"coordinates": [  [ 43.41699, 39.47942 ], [ 43.42927881464768, 39.50769442251476 ], [ 43.45037639091632, 39.47733008303743 ], [ 43.46472913242675, 39.52209007992888 ], [ 43.44125915666543, 39.59646694701849 ], [ 43.53046765068351, 39.63733607804841 ]],"type": "LineString"}} }
         ]
        ,
        "actions": [
          {
            "name": "движение",
            "type": "move",
            "algorithm_id": "alg_id_9",
            "output_mapping":
              [
                {"lat": "new_lat"},
                {"lon": "new_lon"},
                {"course": "new_course"},
                {"segment_index": "new_segment_index"}
              ]
          }
        ]
      }

	],
    "classes": [
        {
            "id": "PNT_01",
            "title": "Точка перехвата объекта",
            "properties": [
              {"name": "class_code", "value":"7132250034230000000", "type": "str"},
              {"name": "is_own", "value":0, "type": "bool"},
              {"name": "lat", "value":43.41686, "type": "double"},
              {"name": "lon", "value":39.47805, "type": "double"},
              {"name": "alt", "value":0, "type": "double"},
              {"name": "course", "value":10, "type": "double"},
              {"name": "speed", "value":9.6, "type": "double"}
            ],
            "actions": []
        }
    ],

    "interactions": [
      {
        "source_object_id": "RABBIT_00",
        "interaction_type": "moving",
        "trigger_condition": "RABBIT_00.properties['state'] =='moving'",
        "response_action": "RABBIT_00.actions.move(item=RABBIT_00, path=RABBIT_00.properties['geo_path'], time_in_seconds=self.second_in_iteration)"
      },
        {
            "source_object_id": "Model_00",
            "interaction_type": "in_zone",
            "trigger_condition": "Model_00.properties['point_exists']==0",
            "response_action": "Model_00.actions.calculation(lat1=FOX_01.properties['lat'], lon1=FOX_01.properties['lon'], alt1=FOX_01.properties['alt'], speed1=FOX_01.properties['speed'], lat2=RABBIT_00.properties['lat'], lon2=RABBIT_00.properties['lon'], alt2=RABBIT_00.properties['alt'], speed2=RABBIT_00.properties['speed'], course2=RABBIT_00.properties['course'], dt=100.0)"
        },
        {
            "source_object_id": "Model_00",
            "interaction_type": "in_zone",
            "trigger_condition": "Model_00.properties['point_exists']==0",
            "response_action": "Model_00.actions.create_point(lon=Model_00.properties['lon'], lat=Model_00.properties['lat'], objects=self.objects, create_object_func=self.create_object)"
        },


        {
          "source_object_id": "FOX_01",
          "interaction_type": "moving",
          "trigger_condition": "FOX_01.properties['state'] =='moving'",
          "response_action": "FOX_01.actions.move(item=FOX_01, time_in_seconds=self.second_in_iteration)"
        },
      {
        "source_object_id": "FOX_01",
        "interaction_type": "maneuver",
        "trigger_condition": "FOX_01.properties['state'] =='moving'",
        "response_action":   "FOX_01.actions.maneuver(object_1=FOX_01, object_2=PNT_01)"
      }
    ],
    "algorithms" : [
      {
        "id":"alg_id_0",
        "title": "Алгоритм движения объекта",
        "description": "Простой встроенный алгоритм в модель движения объекта из точки 1 в точку 2 используя координаты курс и скорость",
        "type": "inner",
        "function": "ModelTasks.move_object",
        "input_parameters": {},
        "output_parameters": {
          "new_lat": "float",
          "new_lon": "float"
        }
      },
        {
            "id":"alg_create_point",
            "title": "Алгоритм позиционирования точки перехвата на карте",
            "description": "Простой встроенный алгоритм в модель ",
            "type": "inner",
            "function": "ModelTasks.create_point",
            "input_parameters": {},
            "output_parameters": {}
        },
        {
            "id":"alg_id_fox_rabbit",
            "title": "алгоритма расчета точки встречи",
            "description": "алгоритма расчета точки встречи С++ ",
            "type": "libcpp",
            "function": "LIBCPP01.calc_point_single",
            "input_parameters": [
              {"lat1": "float"},
              {"lon1": "float"},
              {"alt1": "float"},
              {"speed1": "float"},
              {"lat2": "float"},
              {"lon2": "float"},
              {"alt2": "float"},
              {"speed2": "float"},
              {"course2": "float"},
              {"dt": "float"}
            ],
            "output_parameters": [
              {"_lat": "float"},
              {"_lon": "float"},
              {	"_alt": "float"},
              {	"_is_caught": "bool"}
            ]
        },
      {
        "id":"alg_id_9",
        "title": "Алгоритм движения объекта по заданному маршруту",
        "description": "Простой алгоритм движения объекта по заданному маршруту",
        "type": "inner",
        "function": "ModelTasks.move_object_by_path",
        "input_parameters": {},
        "output_parameters": {
          "new_lat": "float",
          "new_lon": "float",
          "new_course": "float",
          "new_segment_index": "int"
        }
      },
      {
        "id":"alg_id_3",
        "title": "Алгоритм маневрирования ПКР",
        "description": "Используется передаваемый файл pkr_object.py",
        "type": "python_file",
        "function": "pkr_object.pkr_maneuver",
        "input_parameters": {},
        "output_parameters": {
          "new_course": "float"
        }
      }
    ],
    "files": [
        {
            "id": "LIBCPP01",
            "file_name": "fox-rabbit.so",
			"type":"libcpp",
            "md5_hash": "698d51a19d8a121ce581499d7b701668"
        }
    ],
    "simulation_parameters": {
        "time_step": 1,
        "end_condition": "Model_00.properties['is_caught'] == -1",
        "max_iterations": 100000,
        "map_center": "43.49387,39.59992",
        "map_zoom": 6
    }
}


